/* variable declarations */
:root {
    /*
    The 3 grids used to delineate cells are the only regular polygon tessalations of the plane.
    In their normal form, they all use cells that are 10px in height. When scaling them, the
    stroke width must be scaled down proportionally.
    To make the grid transparent or change its color, change the svg stroke color.
    *
    */
    --center-top-left: calc( ( 1 + var( --neighbourhood-range ) ) * 100% / ( 2 * var( --neighbourhood-range ) + 3 ) + var( --pattern-stroke ) );
    --grid-fill: url(#hexagon-pattern);
    --neighbourhood-range: 1;
    --neighbourhood-side: calc( ( 2 * var( --neighbourhood-range ) + 3 ) * 10px * var( --pattern-scale ) + var( --pattern-stroke ) );
    --pattern-color: #e0e0e0;
    --pattern-scale: .75;
    --pattern-stroke: calc( 1px / var( --pattern-scale ) );
    --trail-color: #bfffbf;
}

.square-cell {
    height: calc( 10px * var( --pattern-scale ) - var( --pattern-stroke ) );
    width: calc( 10px * var( --pattern-scale ) - var( --pattern-stroke ) );
}

#center-cell {
    fill: #000;
    x: var( --center-top-left );
    y: var( --center-top-left );
}

#grid-background {
    fill: var( --grid-fill );
    stroke: none;
}

#grid-geometry {
    fill: url(#square-pattern);
    stroke: var( --pattern-color );
    height: calc( 50px * var( --pattern-scale ) + var( --pattern-stroke ) );
    width: calc( 50px * var( --pattern-scale ) + var( --pattern-stroke ) );
}

#grid-neighbourhood {
    background-color: var( --trail-color );
    height: var( --neighbourhood-side );
    width: var( --neighbourhood-side );
}

#hexagon-pattern, #square-pattern, #triangle-pattern {
    transform: scale( var( --pattern-scale ) );
    stroke-width: var( --pattern-stroke );
    stroke: var( --pattern-color );
    stroke-opacity: calc( 0.25 + 3 * var( --pattern-scale ) / 4 );
}

#neighbourhood-canvas {
    height: var( --neighbourhood-side );
    width: var( --neighbourhood-side );
}

#neighbourhood-viz {
    fill: url(#square-pattern);
    stroke: var( --pattern-color );
}

#universe > svg {
    padding: 0;
    height: calc( 50px * var( --pattern-scale ) + var( --pattern-stroke ) );
    width: calc( 50px * var( --pattern-scale ) + var( --pattern-stroke ) );
}
